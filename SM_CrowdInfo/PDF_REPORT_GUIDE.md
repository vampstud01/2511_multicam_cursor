# 📄 PDF 보고서 생성 가이드

## 개요

지하철 혼잡도 대시보드는 분석 결과를 **전문적인 PDF 보고서**로 자동 생성하는 기능을 제공합니다.

## 주요 특징

### 🎨 고품질 디자인
- **ReportLab** 기반 전문 레이아웃
- A4 용지 사이즈 최적화
- 브랜드 컬러 적용 (#003DA5)
- 가독성 높은 한글 폰트

### 📊 풍부한 내용
- **요약 정보**: 핵심 지표 한눈에 파악
- **시각화 차트**: 고해상도 PNG 이미지
- **데이터 테이블**: 구조화된 정보 제공
- **인사이트**: 자동 추출된 발견사항
- **권장사항**: 실용적인 조언

### ⚡ 빠른 생성
- 약 5-10초 만에 생성
- 원클릭 다운로드
- 타임스탬프 자동 추가

## 사용 방법

### 1. 기본 사용

```
1. Streamlit 대시보드 실행
2. 왼쪽 사이드바에서 "보고서 생성" 섹션 확인
3. "🎯 PDF 보고서 생성" 버튼 클릭
4. 5-10초 대기
5. "📥 보고서 다운로드" 버튼으로 다운로드
```

### 2. 필터링 후 보고서 생성

특정 호선이나 역에 대한 보고서를 원한다면:

```
1. 사이드바에서 원하는 필터 설정 (호선, 요일 등)
2. PDF 보고서 생성 버튼 클릭
3. 필터링된 데이터로 보고서 생성됨
```

## 보고서 구성

### 📑 표지 페이지
```
- 제목: 서울 지하철 혼잡도 분석 보고서
- 생성 날짜
- 분석 범위 (데이터 포인트, 역 개수, 호선 개수)
```

### 📈 1. 주요 발견사항
```
- 전체 평균 혼잡도
- 최대 혼잡도
- 피크 시간대
- 오프피크 시간대
```

### 📊 2. 시간대별 혼잡도 분석
```
- 시간대별 추이 차트 (라인 차트)
- 상세 분석 텍스트
- 피크/오프피크 시간대 비교
```

### 🏆 3. 가장 혼잡한 역 TOP 5
```
- 막대 차트
- 상세 테이블
  - 순위
  - 역명
  - 호선
  - 요일
  - 최대 혼잡도
  - 시간
```

### 📅 4. 평일/주말 비교
```
- 비교 막대 차트
- 차이 분석 텍스트
```

### 💡 5. 권장사항
```
- 일반 시민을 위한 권장사항
  - 최적 이동 시간
  - 피해야 할 시간
  - 대안 역 추천
  
- 운영 기관을 위한 제언
  - 배차 간격 조정
  - 안전 관리 강화
  - 정보 제공 개선
```

### 📝 푸터
```
- 데이터 출처
- 생성 시간
```

## 기술 스펙

### 사용 라이브러리
```python
reportlab==4.4.5      # PDF 생성
kaleido==1.2.0        # Plotly 차트를 이미지로 변환
Pillow==12.0.0        # 이미지 처리
```

### 페이지 설정
- **용지**: A4 (210mm × 297mm)
- **여백**: 상하좌우 2cm
- **해상도**: 차트 2x 스케일 (고해상도)

### 폰트
- **Windows**: 맑은 고딕 (malgun.ttf)
- **기타**: 나눔고딕 (NanumGothic.ttf)
- **대체**: Helvetica (폰트 없을 시)

### 색상 팔레트
```
- 주요 색상: #003DA5 (파란색)
- 강조 색상: #FF6B6B (빨간색)
- 보조 색상: #4ECDC4 (청록색)
- 배경: white
```

## 커스터마이징

### 보고서 내용 수정

`report_generator.py` 파일을 수정하여 커스터마이징 가능:

```python
# 섹션 추가
story.append(Paragraph("새로운 섹션", styles['CustomHeading']))

# 차트 추가
new_chart = create_custom_chart(data)
chart_img = save_plotly_chart(new_chart)
story.append(Image(chart_img, width=6*inch, height=3*inch))

# 텍스트 추가
story.append(Paragraph("분석 내용...", styles['CustomBody']))
```

### 스타일 변경

```python
# 색상 변경
styles.add(ParagraphStyle(
    name='CustomTitle',
    textColor=colors.HexColor('#YOUR_COLOR'),
    ...
))

# 폰트 크기 변경
fontSize=16  # 원하는 크기로
```

## 문제 해결

### 1. "PDF 생성 기능을 사용하려면..." 경고

**원인**: 필요한 패키지가 설치되지 않음

**해결**:
```bash
pip install reportlab kaleido Pillow
```

### 2. 한글이 깨져서 나옴

**원인**: 한글 폰트가 없음

**해결**:
```bash
# Windows
- 자동으로 맑은 고딕 사용됨

# Ubuntu/Debian
sudo apt-get install fonts-nanum

# macOS
brew install font-nanum-gothic
```

### 3. 차트가 빈 이미지로 나옴

**원인**: Kaleido 설치 문제

**해결**:
```bash
pip uninstall kaleido
pip install kaleido==1.2.0
```

### 4. 생성이 너무 느림

**원인**: 데이터가 너무 많음

**해결**:
- 필터를 사용하여 데이터 범위 축소
- 특정 호선이나 요일만 선택

### 5. 메모리 부족 오류

**원인**: 대용량 차트 생성

**해결**:
```python
# report_generator.py에서 이미지 크기 조정
save_plotly_chart(fig, width=600, height=400)  # 크기 축소
```

## 활용 사례

### 📊 비즈니스 활용
- 경영진 보고서
- 월간/분기별 분석 리포트
- 투자 제안서

### 🎓 교육 활용
- 데이터 분석 수업 자료
- 프로젝트 발표 자료
- 연구 논문 첨부 자료

### 🏢 공공기관 활용
- 정책 수립 자료
- 시민 홍보 자료
- 운영 개선 보고서

### 📱 개인 활용
- 출퇴근 최적화 분석
- SNS 공유 콘텐츠
- 블로그 포스팅 자료

## 향후 개선 계획

- [ ] 다양한 템플릿 선택 기능
- [ ] 맞춤형 보고서 (선택적 섹션 포함)
- [ ] 다국어 지원 (영어, 중국어 등)
- [ ] PPT 형식 지원
- [ ] 이메일 자동 발송 기능
- [ ] 스케줄링 (일간/주간 자동 생성)

## 기여하기

보고서 개선 아이디어나 버그 리포트는 언제든 환영합니다!

---

**버전**: 1.0  
**최종 업데이트**: 2025-11-18  
**작성자**: AI Assistant

